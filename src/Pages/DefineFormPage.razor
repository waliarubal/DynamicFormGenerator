@page "/define-form"

<PageTitle>Define Form</PageTitle>
<MudText Typo="Typo.h4" Class="my-2">
    <MudIcon Icon="fas fa-code" />
    Define Form
</MudText>

<MudText Typo="Typo.body1" Class="mb-2">
    This is the first step in which you define the form configuration as JSON text. 
    For your convenience befow is form designer which will allow you to define form fields by clicking on 'Add Field' button.
    Click on 'Save' button to save the design or 'Generate Sample' button to load a predefined sample form design.
    When you are done with defining the fields, click on 'Present' button.
</MudText>

<MudText Typo="Typo.subtitle1" Class="my-2" Color="Color.Primary">Form Designer</MudText>
<MudTextField Class="my-2" @bind-Value="Form.Title" Label="Form Title" Required="true" RequiredError="Form title is required." />

<MudButton Class="m-2" Variant="Variant.Filled" StartIcon="fas fa-plus" Color="Color.Secondary" OnClick="AddField">Add Field</MudButton>
<MudButton Class="m-2" Variant="Variant.Filled" StartIcon="fas fa-broom" Color="Color.Secondary" OnClick="ClearDesign">Clear</MudButton>
<MudButton Class="m-2" Variant="Variant.Filled" StartIcon="fas fa-save" Color="Color.Secondary" OnClick="(e) => SaveDesign()">Save</MudButton>
<MudButton Class="m-2" Variant="Variant.Filled" StartIcon="fas fa-magic" Color="Color.Secondary" OnClick="GenerateSampleForm">Generate Sample</MudButton>
<MudButton Class="m-2" Variant="Variant.Filled" EndIcon="fas fa-desktop" Color="Color.Primary" OnClick="PresentForm">Present</MudButton>

<MudGrid Class="my-2">
    @foreach (var field in Form.Fields)
    {
        <MudItem xs="12" sm="6">
            <FormField Field="field" OnDeleted="DeleteField" />
        </MudItem>
    }
</MudGrid>

@if(!string.IsNullOrEmpty(Json)) {
    <MudText Typo="Typo.subtitle1" Class="my-2" Color="Color.Primary">Form Configuration JSON</MudText>
    <MudText Class="my-2" Color="Color.Secondary">@Json</MudText>
}

